{"id":"mpVp","dependencies":[{"name":"C:\\Users\\81805\\Desktop\\textalive-music-app - コピー\\package.json","includedInParent":true,"mtime":1720181853972},{"name":"textalive-app-api","loc":{"line":1,"column":23,"index":23},"parent":"C:\\Users\\81805\\Desktop\\textalive-music-app - コピー\\src\\script.js","resolved":"C:\\Users\\81805\\Desktop\\textalive-music-app - コピー\\node_modules\\textalive-app-api\\dist\\index.es.js"},{"name":"three","loc":{"line":6,"column":30,"index":328},"parent":"C:\\Users\\81805\\Desktop\\textalive-music-app - コピー\\src\\script.js","resolved":"C:\\Users\\81805\\Desktop\\textalive-music-app - コピー\\node_modules\\three\\build\\three.module.js"},{"name":"three/examples/jsm/loaders/FontLoader.js","loc":{"line":3,"column":27,"index":105},"parent":"C:\\Users\\81805\\Desktop\\textalive-music-app - コピー\\src\\script.js","resolved":"C:\\Users\\81805\\Desktop\\textalive-music-app - コピー\\node_modules\\three\\examples\\jsm\\loaders\\FontLoader.js"},{"name":"three/examples/jsm/geometries/TextGeometry.js","loc":{"line":4,"column":29,"index":179},"parent":"C:\\Users\\81805\\Desktop\\textalive-music-app - コピー\\src\\script.js","resolved":"C:\\Users\\81805\\Desktop\\textalive-music-app - コピー\\node_modules\\three\\examples\\jsm\\geometries\\TextGeometry.js"},{"name":"three/examples/jsm/loaders/GLTFLoader","loc":{"line":5,"column":27,"index":256},"parent":"C:\\Users\\81805\\Desktop\\textalive-music-app - コピー\\src\\script.js","resolved":"C:\\Users\\81805\\Desktop\\textalive-music-app - コピー\\node_modules\\three\\examples\\jsm\\loaders\\GLTFLoader.js"}],"generated":{"js":"\"use strict\";var e,n,t,o,i=require(\"textalive-app-api\"),a=u(require(\"three\")),r=a,d=require(\"three/examples/jsm/loaders/FontLoader.js\"),l=require(\"three/examples/jsm/geometries/TextGeometry.js\"),c=require(\"three/examples/jsm/loaders/GLTFLoader\");function s(e){if(\"function\"!=typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:n})(e)}function u(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=s(n);if(t&&t.has(e))return t.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(\"default\"!==a&&{}.hasOwnProperty.call(e,a)){var r=i?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(o,a,r):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}var m,p=\"\",f=[],h=[],g=new i.Player({app:{token:\"6OdzAkUG3Vc5B9nJ\",valenceArousalEnabled:!0,vocalAmplitudeEnabled:!0},mediaElement:document.createElement(\"audio\")});function y(){var e=document.getElementById(\"playBtn\"),n=document.getElementById(\"pauseBtn\"),t=document.getElementById(\"explodeBtn\"),o=document.getElementById(\"volumeSlider\");e.addEventListener(\"click\",w),n.addEventListener(\"click\",v),t.addEventListener(\"click\",B),o.addEventListener(\"input\",M)}function w(){g.requestPlay().then(function(){console.log(\"再生開始\")}).catch(function(e){console.log(\"エラー: \"+e.message)})}function v(){g.requestPause().then(function(){console.log(\"一時停止\")}).catch(function(e){console.log(\"エラー: \"+e.message)})}function B(){f.forEach(function(e){var n=new r.Vector3(.5*(Math.random()-.5),.5*(Math.random()-.5),.5*(Math.random()-.5));e.position.add(n)}),E()}function E(){}function x(){}function M(){var e=document.getElementById(\"volumeSlider\").value/100;g.volume=10*e}function b(){n=new r.Scene,t=new r.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),(o=new r.WebGLRenderer({antialias:!0})).setSize(window.innerWidth,window.innerHeight),o.setPixelRatio(window.devicePixelRatio),document.getElementById(\"container\").appendChild(o.domElement),(new a.TextureLoader).load(\"starry_sky.jpg\",function(e){n.background=e}),t.position.z=5,e=new r.Group,n.add(e),I(),window.addEventListener(\"resize\",L)}function P(){if(p){console.log(p);var n=p.split(/\\s+/);(new d.FontLoader).load(\"Zen Old Mincho Black_Regular.json\",function(t){n.forEach(function(n,o){var i=new l.TextGeometry(n,{font:t,size:.4,height:.1});i.computeBoundingBox(),i.center();var a=new r.MeshBasicMaterial({color:16777215}),d=new r.Mesh(i,a);d.position.set(5*(Math.random()-.5),10+2*o,5*(Math.random()-.5)),f.push(d),h.push({mesh:d,speed:.05+.05*Math.random(),rotationSpeed:{x:.02*(Math.random()-.5),y:.02*(Math.random()-.5),z:.02*(Math.random()-.5)}}),e.add(d)})})}}function j(){h.forEach(function(e,n){e.mesh.position.y-=e.speed,e.mesh.rotation.x+=e.rotationSpeed.x,e.mesh.rotation.y+=e.rotationSpeed.y,e.mesh.rotation.z+=e.rotationSpeed.z,e.mesh.position.y<-5&&(e.mesh.position.y=10)})}function I(){requestAnimationFrame(I),j(),x(),o.render(n,t)}function L(){t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)}g.addListener({onAppReady:function(e){e.managed||(g.createFromSongUrl(\"https://piapro.jp/t/YW_d/20210206123357\"),console.log(g.data.song)),y()},onVideoReady:function(e){document.getElementById(\"playBtn\").disabled=!1,document.getElementById(\"pauseBtn\").disabled=!1,document.getElementById(\"explodeBtn\").disabled=!1},onTimerReady:function(){b()},onTimeUpdate:function(e){if(console.log(\"再生位置のアップデート:\",e,\"ミリ秒\"),g.video){var n=g.timer.position,t=g.video.findPhrase(n);t&&t.text!==p&&(p=t.text,P())}},onPlay:function(){document.getElementById(\"playBtn\").disabled=!0,document.getElementById(\"pauseBtn\").disabled=!1,console.log(\"再生\")},onPause:function(){document.getElementById(\"playBtn\").disabled=!1,document.getElementById(\"pauseBtn\").disabled=!0,console.log(\"一時停止\")}});"},"sourceMaps":null,"error":null,"hash":"ed8c92b3054b838bd71eea415037fd39","cacheData":{"env":{}}}